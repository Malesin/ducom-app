{"version":3,"names":["Toast","React","Component","constructor","props","data","titleStyle","textBodyStyle","config","timeout","autoClose","Promise","resolve","setState","prevState","description","textBody","state","onShow","_closedHandler","onHide","render","isDark","configGeneral","insets","top","createRef","args","instance","current","_open","_close"],"sources":["Toast.tsx"],"sourcesContent":["import * as React from 'react';\nimport { StyleProp, TextStyle } from 'react-native';\nimport { SafeAreaInsetsContext } from 'react-native-safe-area-context';\nimport { ALERT_TYPE } from '../config';\nimport { ToastRender } from './ToastRender';\n\n//export type IModelFunc = (args: { isDark: boolean; type?: ALERT_TYPE; title?: string; description?: string }) => ReactElement;\n\nexport type IConfigToast = {\n  autoClose?: number | boolean;\n\n  type?: ALERT_TYPE;\n  title?: string;\n  textBody?: string;\n  titleStyle?: StyleProp<TextStyle>;\n  textBodyStyle?: StyleProp<TextStyle>;\n  onPress?: () => void;\n  onShow?: () => void;\n  onHide?: () => void;\n};\n\ntype IProps = {\n  isDark: boolean;\n  config?: Pick<IConfigToast, 'autoClose' | 'titleStyle' | 'textBodyStyle'>;\n};\n\ntype IState = {\n  overlayClose?: boolean;\n  data: null | (IConfigToast & { timeout: number });\n};\n\nexport class Toast extends React.Component<IProps, IState> {\n  /**\n   * @type {React.RefObject<Toast>}\n   */\n  public static instance: React.RefObject<Toast> = React.createRef();\n\n  /**\n   * @param {IConfigToast} args\n   */\n  public static show = (args: IConfigToast): void => {\n    Toast.instance.current?._open(args);\n  };\n\n  /**\n   *\n   */\n  public static hide = (): void => {\n    Toast.instance.current?._close();\n  };\n\n  constructor(props: IProps) {\n    super(props);\n    this.state = {\n      data: null,\n    };\n  }\n\n  /**\n   * @param {IConfigToast} args\n   * @return {Promise<void>}\n   */\n  private _open = async (data: IConfigToast): Promise<void> => {\n    const { titleStyle, textBodyStyle } = this.props.config || {};\n    const timeout: number = typeof data.autoClose === 'number' ? data.autoClose : data.autoClose === false ? 0 : 5000;\n    await new Promise<void>((resolve) =>\n      this.setState((prevState) => ({ ...prevState, data: { titleStyle, textBodyStyle, ...data, description: data.textBody, timeout } }), resolve)\n    );\n    this.state.data?.onShow?.();\n  };\n\n  /**\n   * @return {Promise<void>}\n   */\n  private _close = async (): Promise<void> => {\n    this._closedHandler();\n  };\n\n  private _closedHandler = async (): Promise<void> => {\n    const onHide = this.state.data?.onHide;\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, data: null }), resolve));\n    onHide?.();\n  };\n\n  public render() {\n    const { data } = this.state;\n    if (!data) {\n      return null;\n    }\n    const { isDark, config: configGeneral } = this.props;\n    return (\n      <SafeAreaInsetsContext.Consumer>\n        {(insets) => <ToastRender {...data} isDark={isDark} paddingTop={insets?.top} configGeneral={configGeneral} onClose={this._closedHandler} />}\n      </SafeAreaInsetsContext.Consumer>\n    );\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AAEA;;AAEA;;;;;;;;;;AA2BO,MAAMA,KAAN,SAAoBC,KAAK,CAACC,SAA1B,CAAoD;EACzD;AACF;AACA;;EAGE;AACF;AACA;;EAKE;AACF;AACA;EAKEC,WAAW,CAACC,KAAD,EAAgB;IACzB,MAAMA,KAAN;;IADyB,+BAWX,MAAOC,IAAP,IAA6C;MAAA;;MAC3D,MAAM;QAAEC,UAAF;QAAcC;MAAd,IAAgC,KAAKH,KAAL,CAAWI,MAAX,IAAqB,EAA3D;MACA,MAAMC,OAAe,GAAG,OAAOJ,IAAI,CAACK,SAAZ,KAA0B,QAA1B,GAAqCL,IAAI,CAACK,SAA1C,GAAsDL,IAAI,CAACK,SAAL,KAAmB,KAAnB,GAA2B,CAA3B,GAA+B,IAA7G;MACA,MAAM,IAAIC,OAAJ,CAAmBC,OAAD,IACtB,KAAKC,QAAL,CAAeC,SAAD,KAAgB,EAAE,GAAGA,SAAL;QAAgBT,IAAI,EAAE;UAAEC,UAAF;UAAcC,aAAd;UAA6B,GAAGF,IAAhC;UAAsCU,WAAW,EAAEV,IAAI,CAACW,QAAxD;UAAkEP;QAAlE;MAAtB,CAAhB,CAAd,EAAoIG,OAApI,CADI,CAAN;MAGA,yBAAKK,KAAL,CAAWZ,IAAX,+FAAiBa,MAAjB;IACD,CAlB0B;;IAAA,gCAuBV,YAA2B;MAC1C,KAAKC,cAAL;IACD,CAzB0B;;IAAA,wCA2BF,YAA2B;MAAA;;MAClD,MAAMC,MAAM,wBAAG,KAAKH,KAAL,CAAWZ,IAAd,sDAAG,kBAAiBe,MAAhC;MACA,MAAM,IAAIT,OAAJ,CAAmBC,OAAD,IAAa,KAAKC,QAAL,CAAeC,SAAD,KAAgB,EAAE,GAAGA,SAAL;QAAgBT,IAAI,EAAE;MAAtB,CAAhB,CAAd,EAA6DO,OAA7D,CAA/B,CAAN;MACAQ,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM;IACP,CA/B0B;;IAEzB,KAAKH,KAAL,GAAa;MACXZ,IAAI,EAAE;IADK,CAAb;EAGD;EAED;AACF;AACA;AACA;;;EAuBSgB,MAAM,GAAG;IACd,MAAM;MAAEhB;IAAF,IAAW,KAAKY,KAAtB;;IACA,IAAI,CAACZ,IAAL,EAAW;MACT,OAAO,IAAP;IACD;;IACD,MAAM;MAAEiB,MAAF;MAAUd,MAAM,EAAEe;IAAlB,IAAoC,KAAKnB,KAA/C;IACA,oBACE,oBAAC,iDAAD,CAAuB,QAAvB,QACIoB,MAAD,iBAAY,oBAAC,wBAAD,eAAiBnB,IAAjB;MAAuB,MAAM,EAAEiB,MAA/B;MAAuC,UAAU,EAAEE,MAAF,aAAEA,MAAF,uBAAEA,MAAM,CAAEC,GAA3D;MAAgE,aAAa,EAAEF,aAA/E;MAA8F,OAAO,EAAE,KAAKJ;IAA5G,GADf,CADF;EAKD;;AAhEwD;;;;gBAA9CnB,K,2BAIsCC,KAAK,CAACyB,SAAN,E;;gBAJtC1B,K,UASW2B,IAAD,IAA8B;EAAA;;EACjD,yBAAA3B,KAAK,CAAC4B,QAAN,CAAeC,OAAf,gFAAwBC,KAAxB,CAA8BH,IAA9B;AACD,C;;gBAXU3B,K,UAgBU,MAAY;EAAA;;EAC/B,0BAAAA,KAAK,CAAC4B,QAAN,CAAeC,OAAf,kFAAwBE,MAAxB;AACD,C"}