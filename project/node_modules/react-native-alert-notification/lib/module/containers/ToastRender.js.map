{"version":3,"names":["React","Animated","Image","PanResponder","Platform","StyleSheet","Text","View","Color","getImage","ALERT_TYPE","ToastRender","Component","constructor","props","prevProps","prevState","isInit","state","Promise","resolve","_animatedTiming","start","_autoCloseHandler","isDark","setState","styles","__styles","_countdown","toValue","timing","_positionToast","duration","useNativeDriver","timeout","_timeout","setTimeout","_heightContainer","onClose","clearTimeout","event","height","nativeEvent","layout","setValue","create","onStartShouldSetPanResponder","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderMove","_","dy","onPanResponderTerminationRequest","onPanResponderStart","startY","_pressStart","startAt","Date","now","onPanResponderEnd","heightContainer","Math","abs","onPress","type","title","description","titleStyle","textBodyStyle","cardContainer","backendImage","flatten","image","labelContainer","titleLabel","descLabel","Value","render","paddingTop","_ModelRender","_layoutHandler","_panResponder","panHandlers","container","zIndex","transform","translateY","position","left","right","flexDirection","paddingHorizontal","paddingBottom","backgroundColor","get","select","ios","borderRadius","marginHorizontal","android","marginTop","overflow","flex","fontWeight","fontSize","color","alignSelf","width","aspectRatio","marginRight","SUCCESS","tintColor","DANGER","WARNING","INFO"],"sources":["ToastRender.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Animated, Image, LayoutChangeEvent, PanResponder, Platform, StyleSheet, Text, View, StyleProp, TextStyle } from 'react-native';\nimport { Color, getImage } from '../service';\nimport { ALERT_TYPE } from '../config';\n\ninterface IProps {\n  isDark: boolean;\n  paddingTop?: number;\n  type?: ALERT_TYPE;\n  title?: string;\n  description?: string;\n  timeout: number;\n  onPress?: () => void;\n  onClose(): void;\n  configGeneral: any;\n\n  titleStyle?: StyleProp<TextStyle>;\n  textBodyStyle?: StyleProp<TextStyle>;\n}\n\ninterface IState {\n  isInit: boolean;\n  styles: ReturnType<typeof __styles>;\n}\n\nexport class ToastRender extends React.Component<IProps, IState> {\n  private _heightContainer: number;\n  private _positionToast: Animated.Value;\n  private _pressStart: null | { startY: number; startAt: number };\n  private _countdown: null | Function;\n\n  constructor(props: IProps) {\n    super(props);\n    this._heightContainer = 0;\n    this._pressStart = null;\n    this._positionToast = new Animated.Value(0);\n    this._countdown = null;\n    this.state = {\n      isInit: false,\n      styles: __styles(props.isDark),\n    };\n  }\n\n  public componentDidUpdate = async (prevProps: Readonly<IProps>, prevState: Readonly<IState>): Promise<void> => {\n    if (!prevState.isInit && this.state.isInit) {\n      await new Promise((resolve) => this._animatedTiming(0).start(resolve));\n      this._autoCloseHandler();\n    }\n    if (prevProps.isDark !== this.props.isDark) {\n      this.setState({ ...prevState, styles: __styles(this.props.isDark) });\n    }\n  };\n\n  public componentWillUnmount = (): void => {\n    this._countdown?.();\n  };\n\n  private _animatedTiming = (toValue: number) => {\n    return Animated.timing(this._positionToast, {\n      toValue,\n      duration: 250,\n      useNativeDriver: true,\n    });\n  };\n\n  private _autoCloseHandler = (): void => {\n    this._countdown?.();\n    if (this.props.timeout) {\n      this._countdown = (() => {\n        const _timeout = setTimeout(() => this._animatedTiming(-this._heightContainer).start(this.props.onClose), this.props.timeout);\n        return () => clearTimeout(_timeout);\n      })();\n    }\n  };\n\n  private _layoutHandler = (event: LayoutChangeEvent) => {\n    if (this.state.isInit) {\n      return;\n    }\n    const { height } = event.nativeEvent.layout;\n    this._heightContainer = height;\n    this._positionToast.setValue(-height);\n    this.setState((prevState) => ({ ...prevState, isInit: true }));\n  };\n\n  private _panResponder = PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onStartShouldSetPanResponderCapture: () => false,\n    onMoveShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponderCapture: () => true,\n    onPanResponderMove: (_, { dy }) => {\n      if (dy < 0) {\n        this._positionToast.setValue(dy);\n      }\n    },\n    onPanResponderTerminationRequest: () => true,\n    onPanResponderStart: (_, { dy: startY }) => {\n      this._pressStart = { startY, startAt: Date.now() };\n      this._countdown?.();\n    },\n    onPanResponderEnd: async (_, { dy }) => {\n      let heightContainer = this._heightContainer;\n      const { startY, startAt } = this._pressStart!;\n      this._pressStart = null;\n      if (startAt + 500 >= Date.now() && Math.abs(dy - startY) < 7) {\n        this.props?.onPress?.();\n        this._autoCloseHandler();\n      } else if (dy < -(heightContainer / 3)) {\n        this._animatedTiming(-heightContainer).start(this.props.onClose);\n      } else {\n        this._animatedTiming(0).start(this._autoCloseHandler);\n      }\n    },\n  });\n\n  private _ModelRender = () => {\n    const { type, title, description, titleStyle, textBodyStyle } = this.props;\n    const { styles } = this.state;\n    // if (model) {\n    //   return model({ isDark, type, title, description });\n    // }\n    return (\n      <View style={styles.cardContainer}>\n        {type && (\n          <React.Fragment>\n            <View style={styles.backendImage} />\n            <Image source={getImage(type)} resizeMode=\"contain\" style={StyleSheet.flatten([styles.image, styles[`${type}Image`]])} />\n          </React.Fragment>\n        )}\n        <View style={styles.labelContainer}>\n          {title && <Text style={StyleSheet.flatten([styles.titleLabel, titleStyle])}>{title}</Text>}\n          {description && <Text style={StyleSheet.flatten([styles.descLabel, textBodyStyle])}>{description}</Text>}\n        </View>\n      </View>\n    );\n  };\n\n  public render() {\n    const paddingTop = this.props.paddingTop || 0;\n    const { isInit, styles } = this.state;\n    const { _ModelRender } = this;\n    return (\n      <Animated.View\n        collapsable={false}\n        onLayout={this._layoutHandler}\n        {...this._panResponder.panHandlers}\n        style={StyleSheet.flatten([styles.container, { paddingTop, zIndex: isInit ? 99999 : -1, transform: [{ translateY: this._positionToast }] }])}\n      >\n        <_ModelRender />\n      </Animated.View>\n    );\n  }\n}\n\nconst __styles = (isDark: boolean) =>\n  StyleSheet.create({\n    container: {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n    },\n\n    cardContainer: {\n      flexDirection: 'row',\n      paddingHorizontal: 12,\n      paddingTop: 12,\n      paddingBottom: 12,\n      backgroundColor: Color.get('card', isDark),\n      ...Platform.select({\n        ios: {\n          borderRadius: 12,\n          marginHorizontal: 12,\n        },\n        android: {\n          marginTop: 6,\n          marginHorizontal: 6,\n          borderRadius: 6,\n        },\n      }),\n    },\n\n    labelContainer: {\n      overflow: 'hidden',\n      flex: 1,\n    },\n\n    titleLabel: {\n      fontWeight: 'bold',\n      fontSize: 18,\n      color: Color.get('label', isDark),\n    },\n    descLabel: {\n      color: Color.get('label', isDark),\n    },\n    backendImage: {\n      position: 'absolute',\n      alignSelf: 'center',\n      height: 12,\n      width: 12,\n      backgroundColor: '#FBFBFB',\n      borderRadius: 100,\n      left: 12 + 7,\n    },\n    image: {\n      alignSelf: 'center',\n      width: 25,\n      aspectRatio: 1,\n      marginRight: 12,\n    },\n\n    [`${ALERT_TYPE.SUCCESS}Image`]: {\n      tintColor: Color.get('success', isDark),\n    },\n    [`${ALERT_TYPE.DANGER}Image`]: {\n      tintColor: Color.get('danger', isDark),\n    },\n    [`${ALERT_TYPE.WARNING}Image`]: {\n      tintColor: Color.get('warning', isDark),\n    },\n    [`${ALERT_TYPE.INFO}Image`]: {\n      tintColor: Color.get('info', isDark),\n    },\n  });\n"],"mappings":"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"}