{"version":3,"names":["AnimatedPagerView","Animated","createAnimatedComponent","PagerView","Container","React","memo","forwardRef","ref","initialTabName","headerHeight","initialHeaderHeight","minHeaderHeight","tabBarHeight","initialTabBarHeight","TABBAR_HEIGHT","revealHeaderOnScroll","snapThreshold","children","renderHeader","renderTabBar","props","headerContainerStyle","cancelTranslation","containerStyle","lazy","cancelLazyFadeIn","pagerProps","onIndexChange","onTabChange","width","customWidth","allowHeaderOverscroll","containerRef","tabProps","tabNamesArray","Tab","refMap","setRef","windowWidth","containerHeight","undefined","contentInset","IS_IOS","value","snappingTo","offset","accScrollY","oldAccScrollY","accDiffClamp","scrollYCurrent","scrollY","map","contentHeights","tabNames","index","findIndex","n","data","setData","useState","useEffect","focusedTab","calculateNextOffset","headerScrollDistance","indexDecimal","afterRender","ONE_FRAME_MS","duration","resyncTabScroll","name","trigger","nextIndex","Math","round","propagateTabChange","useCallback","change","i","prevIndex","prevTabName","tabName","_current","prev","headerTranslateY","min","stylez","transform","translateY","getHeaderHeight","event","height","nativeEvent","layout","getTabBarHeight","onLayout","onTabPress","scrollToImpl","current","setPage","length","pageScrollHandler","onPageScroll","e","position","useImperativeHandle","setIndex","jumpToTab","getFocusedTab","getCurrentIndex","styles","container","topContainer","headerContainer","tabBarContainer","style","StyleSheet","absoluteFill","Children","toArray","create","flex","zIndex","backgroundColor","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"sources":["Container.tsx"],"sourcesContent":["import React from 'react'\nimport {\n  LayoutChangeEvent,\n  StyleSheet,\n  useWindowDimensions,\n  View,\n} from 'react-native'\nimport PagerView from 'react-native-pager-view'\nimport Animated, {\n  runOnJS,\n  runOnUI,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  useDerivedValue,\n  useSharedValue,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated'\n\nimport { Context, TabNameContext } from './Context'\nimport { Lazy } from './Lazy'\nimport { MaterialTabBar, TABBAR_HEIGHT } from './MaterialTabBar'\nimport { Tab } from './Tab'\nimport { IS_IOS, ONE_FRAME_MS, scrollToImpl } from './helpers'\nimport {\n  useAnimatedDynamicRefs,\n  useContainerRef,\n  usePageScrollHandler,\n  useTabProps,\n} from './hooks'\nimport {\n  CollapsibleProps,\n  CollapsibleRef,\n  ContextType,\n  IndexChangeEventData,\n  TabName,\n} from './types'\n\nconst AnimatedPagerView = Animated.createAnimatedComponent(PagerView)\n\n/**\n * Basic usage looks like this:\n *\n * ```tsx\n * import { Tabs } from 'react-native-collapsible-tab-view'\n *\n * const Example = () => {\n *   return (\n *     <Tabs.Container renderHeader={MyHeader}>\n *       <Tabs.Tab name=\"A\">\n *         <ScreenA />\n *       </Tabs.Tab>\n *       <Tabs.Tab name=\"B\">\n *         <ScreenB />\n *       </Tabs.Tab>\n *     </Tabs.Container>\n *   )\n * }\n * ```\n */\nexport const Container = React.memo(\n  React.forwardRef<CollapsibleRef, CollapsibleProps>(\n    (\n      {\n        initialTabName,\n        headerHeight: initialHeaderHeight,\n        minHeaderHeight = 0,\n        tabBarHeight: initialTabBarHeight = TABBAR_HEIGHT,\n        revealHeaderOnScroll = false,\n        snapThreshold,\n        children,\n        renderHeader,\n        renderTabBar = (props) => <MaterialTabBar {...props} />,\n        headerContainerStyle,\n        cancelTranslation,\n        containerStyle,\n        lazy,\n        cancelLazyFadeIn,\n        pagerProps,\n        onIndexChange,\n        onTabChange,\n        width: customWidth,\n        allowHeaderOverscroll,\n      },\n      ref\n    ) => {\n      const containerRef = useContainerRef()\n\n      const [tabProps, tabNamesArray] = useTabProps(children, Tab)\n\n      const [refMap, setRef] = useAnimatedDynamicRefs()\n\n      const windowWidth = useWindowDimensions().width\n      const width = customWidth ?? windowWidth\n\n      const containerHeight = useSharedValue<number | undefined>(undefined)\n\n      const tabBarHeight = useSharedValue<number | undefined>(\n        initialTabBarHeight\n      )\n\n      const headerHeight = useSharedValue<number | undefined>(\n        !renderHeader ? 0 : initialHeaderHeight\n      )\n\n      const contentInset = useDerivedValue(() => {\n        if (allowHeaderOverscroll) return 0\n\n        // necessary for the refresh control on iOS to be positioned underneath the header\n        // this also adjusts the scroll bars to clamp underneath the header area\n        return IS_IOS\n          ? (headerHeight.value || 0) + (tabBarHeight.value || 0)\n          : 0\n      })\n\n      const snappingTo: ContextType['snappingTo'] = useSharedValue(0)\n      const offset: ContextType['offset'] = useSharedValue(0)\n      const accScrollY: ContextType['accScrollY'] = useSharedValue(0)\n      const oldAccScrollY: ContextType['oldAccScrollY'] = useSharedValue(0)\n      const accDiffClamp: ContextType['accDiffClamp'] = useSharedValue(0)\n      const scrollYCurrent: ContextType['scrollYCurrent'] = useSharedValue(0)\n      const scrollY: ContextType['scrollY'] = useSharedValue(\n        tabNamesArray.map(() => 0)\n      )\n\n      const contentHeights: ContextType['contentHeights'] = useSharedValue(\n        tabNamesArray.map(() => 0)\n      )\n\n      const tabNames: ContextType['tabNames'] = useDerivedValue<TabName[]>(\n        () => tabNamesArray,\n        [tabNamesArray]\n      )\n      const index: ContextType['index'] = useSharedValue(\n        initialTabName\n          ? tabNames.value.findIndex((n) => n === initialTabName)\n          : 0\n      )\n\n      const [data, setData] = React.useState(tabNamesArray)\n\n      React.useEffect(() => {\n        setData(tabNamesArray)\n      }, [tabNamesArray])\n\n      const focusedTab: ContextType['focusedTab'] = useDerivedValue<TabName>(() => {\n        return tabNames.value[index.value]\n      }, [tabNames])\n      const calculateNextOffset = useSharedValue(index.value)\n      const headerScrollDistance: ContextType['headerScrollDistance'] = useDerivedValue(() => {\n        return headerHeight.value !== undefined\n          ? headerHeight.value - minHeaderHeight\n          : 0\n      }, [headerHeight, minHeaderHeight])\n\n      const indexDecimal: ContextType['indexDecimal'] = useSharedValue(\n        index.value\n      )\n\n      const afterRender = useSharedValue(0)\n      React.useEffect(() => {\n        afterRender.value = withDelay(\n          ONE_FRAME_MS * 5,\n          withTiming(1, { duration: 0 })\n        )\n      }, [afterRender, tabNamesArray])\n\n      const resyncTabScroll = () => {\n        'worklet'\n        for (const name of tabNamesArray) {\n          scrollToImpl(\n            refMap[name],\n            0,\n            scrollYCurrent.value - contentInset.value,\n            false\n          )\n        }\n      }\n\n      // the purpose of this is to scroll to the proper position if dynamic tabs are changing\n      useAnimatedReaction(\n        () => {\n          return afterRender.value === 1\n        },\n        (trigger) => {\n          if (trigger) {\n            afterRender.value = 0\n            resyncTabScroll()\n          }\n        },\n        [tabNamesArray, refMap, afterRender, contentInset]\n      )\n\n      // derived from scrollX\n      // calculate the next offset and index if swiping\n      // if scrollX changes from tab press,\n      // the same logic must be done, but knowing\n      // the next index in advance\n      useAnimatedReaction(\n        () => {\n          const nextIndex = Math.round(indexDecimal.value)\n          return nextIndex\n        },\n        (nextIndex) => {\n          if (nextIndex !== null && nextIndex !== index.value) {\n            calculateNextOffset.value = nextIndex\n          }\n        },\n        []\n      )\n\n      const propagateTabChange = React.useCallback(\n        (change: IndexChangeEventData<TabName>) => {\n          onTabChange?.(change)\n          onIndexChange?.(change.index)\n        },\n        [onIndexChange, onTabChange]\n      )\n\n      useAnimatedReaction(\n        () => {\n          return calculateNextOffset.value\n        },\n        (i) => {\n          if (i !== index.value) {\n            offset.value =\n              scrollY.value[index.value] - scrollY.value[i] + offset.value\n            runOnJS(propagateTabChange)({\n              prevIndex: index.value,\n              index: i,\n              prevTabName: tabNames.value[index.value],\n              tabName: tabNames.value[i],\n            })\n            index.value = i\n            scrollYCurrent.value = scrollY.value[index.value] || 0\n          }\n        },\n        []\n      )\n\n      useAnimatedReaction(\n        () => headerHeight.value,\n        (_current, prev) => {\n          if (prev === undefined) {\n            // sync scroll if we started with undefined header height\n            resyncTabScroll()\n          }\n        }\n      )\n\n      const headerTranslateY = useDerivedValue(() => {\n        return revealHeaderOnScroll\n          ? -accDiffClamp.value\n          : -Math.min(scrollYCurrent.value, headerScrollDistance.value)\n      }, [revealHeaderOnScroll])\n\n      const stylez = useAnimatedStyle(() => {\n        return {\n          transform: [\n            {\n              translateY: headerTranslateY.value,\n            },\n          ],\n        }\n      }, [revealHeaderOnScroll])\n\n      const getHeaderHeight = React.useCallback(\n        (event: LayoutChangeEvent) => {\n          const height = event.nativeEvent.layout.height\n          if (headerHeight.value !== height) {\n            headerHeight.value = height\n          }\n        },\n        [headerHeight]\n      )\n\n      const getTabBarHeight = React.useCallback(\n        (event: LayoutChangeEvent) => {\n          const height = event.nativeEvent.layout.height\n          if (tabBarHeight.value !== height) tabBarHeight.value = height\n        },\n        [tabBarHeight]\n      )\n\n      const onLayout = React.useCallback(\n        (event: LayoutChangeEvent) => {\n          const height = event.nativeEvent.layout.height\n          if (containerHeight.value !== height) containerHeight.value = height\n        },\n        [containerHeight]\n      )\n\n      const onTabPress = React.useCallback(\n        (name: TabName) => {\n          const i = tabNames.value.findIndex((n) => n === name)\n\n          if (name === focusedTab.value) {\n            const ref = refMap[name]\n            runOnUI(scrollToImpl)(\n              ref,\n              0,\n              headerScrollDistance.value - contentInset.value,\n              true\n            )\n          } else {\n            containerRef.current?.setPage(i)\n          }\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [containerRef, refMap, contentInset]\n      )\n\n      React.useEffect(() => {\n        if (index.value >= tabNamesArray.length) {\n          onTabPress(tabNamesArray[tabNamesArray.length - 1])\n        }\n      }, [index.value, onTabPress, tabNamesArray])\n\n      const pageScrollHandler = usePageScrollHandler({\n        onPageScroll: (e) => {\n          'worklet'\n          indexDecimal.value = e.position + e.offset\n        },\n      })\n\n      React.useImperativeHandle(\n        ref,\n        () => ({\n          setIndex: (index) => {\n            const name = tabNames.value[index]\n            onTabPress(name)\n            return true\n          },\n          jumpToTab: (name) => {\n            onTabPress(name)\n            return true\n          },\n          getFocusedTab: () => {\n            return tabNames.value[index.value]\n          },\n          getCurrentIndex: () => {\n            return index.value\n          },\n        }),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [onTabPress]\n      )\n\n      return (\n        <Context.Provider\n          value={{\n            contentInset,\n            tabBarHeight,\n            headerHeight,\n            refMap,\n            tabNames,\n            index,\n            snapThreshold,\n            revealHeaderOnScroll,\n            focusedTab,\n            accDiffClamp,\n            indexDecimal,\n            containerHeight,\n            minHeaderHeight,\n            scrollYCurrent,\n            scrollY,\n            setRef,\n            headerScrollDistance,\n            accScrollY,\n            oldAccScrollY,\n            offset,\n            snappingTo,\n            contentHeights,\n            headerTranslateY,\n            width,\n            allowHeaderOverscroll,\n          }}\n        >\n          <Animated.View\n            style={[styles.container, { width }, containerStyle]}\n            onLayout={onLayout}\n            pointerEvents=\"box-none\"\n          >\n            <Animated.View\n              pointerEvents=\"box-none\"\n              style={[\n                styles.topContainer,\n                headerContainerStyle,\n                !cancelTranslation && stylez,\n              ]}\n            >\n              <View\n                style={[styles.container, styles.headerContainer]}\n                onLayout={getHeaderHeight}\n                pointerEvents=\"box-none\"\n              >\n                {renderHeader &&\n                  renderHeader({\n                    containerRef,\n                    index,\n                    tabNames: tabNamesArray,\n                    focusedTab,\n                    indexDecimal,\n                    onTabPress,\n                    tabProps,\n                  })}\n              </View>\n              <View\n                style={[styles.container, styles.tabBarContainer]}\n                onLayout={getTabBarHeight}\n                pointerEvents=\"box-none\"\n              >\n                {renderTabBar &&\n                  renderTabBar({\n                    containerRef,\n                    index,\n                    tabNames: tabNamesArray,\n                    focusedTab,\n                    indexDecimal,\n                    width,\n                    onTabPress,\n                    tabProps,\n                  })}\n              </View>\n            </Animated.View>\n\n            <AnimatedPagerView\n              ref={containerRef}\n              onPageScroll={pageScrollHandler}\n              initialPage={index.value}\n              {...pagerProps}\n              style={[pagerProps?.style, StyleSheet.absoluteFill]}\n            >\n              {data.map((tabName, i) => {\n                return (\n                  <View key={i}>\n                    <TabNameContext.Provider value={tabName}>\n                      <Lazy\n                        startMounted={lazy ? undefined : true}\n                        cancelLazyFadeIn={!lazy ? true : !!cancelLazyFadeIn}\n                      >\n                        {\n                          React.Children.toArray(children)[\n                            i\n                          ] as React.ReactElement\n                        }\n                      </Lazy>\n                    </TabNameContext.Provider>\n                  </View>\n                )\n              })}\n            </AnimatedPagerView>\n          </Animated.View>\n        </Context.Provider>\n      )\n    }\n  )\n)\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  topContainer: {\n    position: 'absolute',\n    zIndex: 100,\n    width: '100%',\n    backgroundColor: 'white',\n    shadowColor: '#000000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.23,\n    shadowRadius: 2.62,\n    elevation: 4,\n  },\n  tabBarContainer: {\n    zIndex: 1,\n  },\n  headerContainer: {\n    zIndex: 2,\n  },\n})\n"],"mappings":"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"}